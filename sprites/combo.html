<!DOCTYPE html>
<html>
<head>
    <title>Combo Demo</title>
</head>
<body>
<h1>Epilepsy Warning</h1>
<canvas id="main" width="800" height="600"></canvas>
<br>
<button id="start">Animate</button>

<script type="text/javascript" src="kid.js"></script>
<script type="text/javascript" src="explosion.js"></script>
<script type="text/javascript" src="computer.js"></script>
<script type="text/javascript">
    ( function () {
        var MAXSTEP_kid = 250;
        var MAXSTEP_explosion = 15;
        var MAXSTEP_computer = 5;
        var step_kid = 0;
        var step_computer = 0;

        var kidObj = kid("main", {
            MAXSTEP: MAXSTEP_kid,
            x: 300,
            y: 200
        });

        var explosionObj = explosion("main", {
            MAXSTEP: MAXSTEP_explosion,
            x: 300,
            y: 200,
            width: 1500,
            height:1500
        });

        var computerObj = computer("main", {
            MAXSTEP: MAXSTEP_computer,
            x: 500,
            y: 200,
        });

        var animate = function(){
            document.getElementById("main")
                .getContext("2d")
                .clearRect( 0, 0, 800, 600 ); // clear canvas

            step_kid++;

            if (step_kid > MAXSTEP_kid) {
                step_kid = 0;
            }


            step_computer++;

            if (step_computer > MAXSTEP_computer) {
                step_computer = 0;
            }

            computerObj.draw(step_computer);

            kidObj.draw(step_kid);

            if (step_kid >= MAXSTEP_kid - MAXSTEP_explosion){
                explosionObj.draw(step_kid - (MAXSTEP_kid - MAXSTEP_explosion));
            }

            window.requestAnimationFrame(animate);
        };

        document.getElementById("start").onclick = function(){
            animate();
        }
    }());
</script>
</body>
</html>